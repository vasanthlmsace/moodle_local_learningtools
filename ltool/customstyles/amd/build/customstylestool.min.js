/**
 * Custom styles ltool define js.
 * @module   ltool_customstyles
 * @copyright 2021, bdecent gmbh bdecent.de
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("ltool_customstyles/customstylestool",["jquery","core/fragment","core/modal_factory","core/modal_events","core/notification"],(function($,Fragment,ModalFactory,ModalEvents,notification){var LearningToolCustomStyles=function(params){var self=this,customstylesToolInfo=document.querySelector(".ltoolcustomstyles-info #ltoolcustomstyles-action");if(customstylesToolInfo){var customstylestoolhovercolor=customstylesToolInfo.getAttribute("data-hovercolor"),customstylestoolfontcolor=customstylesToolInfo.getAttribute("data-fontcolor");customstylestoolhovercolor&&customstylestoolfontcolor&&customstylesToolInfo.addEventListener("mouseover",(function(){document.querySelector("#ltoolcustomstyles-info p").style.background=customstylestoolhovercolor,document.querySelector("#ltoolcustomstyles-info p").style.color=customstylestoolfontcolor})),customstylesToolInfo.addEventListener("click",(function(){self.displaycustomstylesbox(params)}))}};return LearningToolCustomStyles.prototype.displaycustomstylesbox=function(params){var self=this,ltoolcustomstylesbody=document.getElementsByTagName("body")[0];ltoolcustomstylesbody.classList.contains("learningtool-customstyles")||ltoolcustomstylesbody.classList.add("learningtool-customstyles"),ModalFactory.create({title:params.modalheader,type:ModalFactory.types.SAVE_CANCEL,body:self.getcustomstylesbox(params),large:!0}).then((function(modal){return modal.show(),modal.getRoot().on(ModalEvents.hidden,(function(){modal.destroy()})),modal.getRoot().on(ModalEvents.save,(function(e){e.preventDefault(),$(e.target).find("button[data-action=save]").attr("disabled",!0),modal.getRoot().find("form").submit()})),modal.getRoot().on("submit","form",(e=>{e.preventDefault(),self.submitFormData(modal,params.contextid)})),modal})).catch(notification.exception)},LearningToolCustomStyles.prototype.submitFormData=function(modal,contextId){var modalform=document.querySelectorAll("#ltoolcustomstyles-editorbox form")[0],args={formdata:new URLSearchParams(new FormData(modalform)).toString()};Fragment.loadFragment("ltool_customstyles","save_course_customstyles",contextId,args),modal.hide(),window.setTimeout((function(){window.location.reload()}),500)},LearningToolCustomStyles.prototype.getcustomstylesbox=function(params){return Fragment.loadFragment("ltool_customstyles","get_customstyles_editor",params.contextid,params)},{init:function(params){return new LearningToolCustomStyles(params)}}}));

//# sourceMappingURL=customstylestool.min.js.map